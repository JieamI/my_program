{% extends 'basic.html' %}
{% block head %}
	<title>feedback</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<link href="static/css/feedback.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='ueditor/ueditor.config.js') }}"></script>
    <script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='ueditor/ueditor.all.min.js') }}"> </script>
	<script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='ueditor/lang/zh-cn/zh-cn.js') }}"></script>
	<script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
{% endblock %}

{%block content %}
<body>
	<div id="app">				<!--将div元素与vue绑定-->
		<p class="alert" v-if="show1">请输入反馈内容</p>	
		<p class="alert" v-if="show2">请至少选择一种反馈类型</p>
	
		<h1>Suggestions</h1>	
		<div class="main">
			<form method="post" name="form2">
				<script name='Feedback' id="editor" type="text/plain" class="input"></script>
				<input type="checkbox" name="Checkbox" value="A">A
				<input type="checkbox" name="Checkbox" value="B">B
				<input class="btn" type="button" v-on:click="check()" value="提交">
			</form>
		</div>
	</div>

	<script type="text/javascript">	
		//实例化编辑器
		var ue = UE.getEditor('editor',{
			serverUrl: "/upload/"
		});
		
		var app = new Vue({
			el: '#app',
			data: {
				show1:false,
				show2:false
			},
			methods: {
				check: function(){
					this.show1 = false;
					this.show2 = false;
					var text = ue.getContentTxt();
					var cbs = document.getElementsByName("Checkbox");
					var flag = 1;
					for (var i = 0; i < cbs.length; i++) {
					if (cbs[i].checked) {
						flag = 0;
					}}	
					if(text && !flag){
						document.form2.submit();
					}
					else if(!text){
						this.show1 = true;
					}
					else if(flag){
						this.show2 = true;
					}
				}	
			}
		})
		
		/*
		function check(){
		
					var text = ue.getContentTxt();
					var cbs = document.getElementsByName("Checkbox");
					var flag = 1;
					for (var i = 0; i < cbs.length; i++) {
					if (cbs[i].checked) {
						flag = 0;
					}}	
					if(text && !flag){
						document.form2.submit();
					}
					else if(!text){
						alert("shuruneiron");
					}
					else if(flag){
						alert("nocheck");
					}
				}	
		*/	
	</script>
</body>
{% endblock %}